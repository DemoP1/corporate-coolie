<div class="cart-container">
    <div class="cart-header">
        <h2>Shopping Cart</h2>
    </div>
    @if((cartItems$ |async)?.length === 0 ){
    <div class="empty-cart">
        <p>Your cart is empty</p>
    </div>
    }
    @else{

    <div class="cart-items">
        @for (item of cartItems$ |async; track $index) {
        <div class="cart-item">
            <!-- Remove Button -->
            <button class="remove-btn" (click)="removeItem(item.id)" title="Remove item">
                <i class="fa fa-trash">X</i>
            </button>

            <!-- Product Image -->
            <div class="item-image">
                <img [src]="item.image" [alt]="item.title" />
            </div>

            <!-- Product Details -->
            <div class="item-details">
                <h3 class="item-title">{{ item.title }}</h3>
                <p class="item-price">${{ item.price | number: '1.2-2' }}</p>
            </div>

            <!-- Quantity Controls -->
            <div class="item-controls">
                <button class="decrement-btn" (click)="decrementQuantity(item.id)">
                    <i class="fas fa-minus">-</i>
                </button>
                <span class="quantity">{{ item.quantity }}</span>
                <button class="increment-btn" (click)="incrementQuantity(item.id)">
                    <i class="fas fa-plus">+</i>
                </button>
            </div>

            <!-- Subtotal -->
            <div class="item-subtotal">
                <p>${{ (item.price * item.quantity) | number: '1.2-2' }}</p>
            </div>
        </div>
        }
    </div>
    @if (totalPrice$ | async) {
    <div class="cart-summary">
        <h3>Cart Summary</h3>
        <p style="text-align: end;"> Total Items: {{ cartItemsCount$ | async }}</p>
        <p style="text-align: end;">Total Price: {{ totalPrice$ | async |currency}}</p>
        <button class="checkout-btn">Proceed to Checkout</button>
    </div>
    }
    }
</div>